<div *ngIf="!!phone; else loadingIndicator">
  <ng-container *ngIf="!isInEditMode">
    <section id="detailsPage">
      <div class="wrapper">
        <div class="phoneCover">
          <img src="{{phone.img}}">
        </div>
        <div class="phoneInfo">
          <div class="phoneText">

            <p>Name: {{phone.phoneName}}</p>
            <p>Price: ${{phone.phonePrice}}</p>
            <p>Description: {{phone.description}}</p>
            <p>Release Date: {{phone.releaseDate}}</p>
            <p>ImageURL: {{phone.img}}</p>
            
          </div>

          <div *ngIf="isAuthor" class="actionBtn">
            <button (click)="getLikes()" [routerLink]="['/data/details/', phone._id, 'likes']" class="like">Like</button>
            <p class="field field-icon">
              <label for="password"><span><i class="fa-solid fa-thumbs-up"></i></span></label>
            <span class="like">{{phone.rating}}</span>
            </p>  
          </div>
          

          <!-- Only for registered user and creator of the phone-->
          <div *ngIf="isOwner" class="actionBtn">
            <a (click)="editPhone()" [routerLink]="['/data/details/', phone._id]" class="edit">Edit</a>
            <a (click)="deletePhone()" [routerLink]="['/data/delete/', phone._id]" class="remove">Delete</a>

          </div>
        </div>
      </div>

      
    </section>
  </ng-container>
</div>


<div *ngIf="!!phone; else loadingIndicator">
  <ng-container *ngIf="isInEditMode">
    <form #editForm="ngForm" (ngSubmit)="updatePhone()">
      <section id="detailsPage">
        <div class="wrapper">
          <div class="phoneCover">
            <img #img src="{{phone.img}}">
          </div>
          <div class="phoneInfo">
            <div class="phoneText">

              <label>Name:</label>
              <input #phoneName="ngModel" type="text" name="phoneName" ngModel required id="phoneName"
                value="phone name">
              <ng-container *ngIf="phoneName.touched && phoneName.invalid" class="error">
                <p *ngIf="phoneName.errors?.['required']" class="error">
                  Phone name is required!
                </p>
              </ng-container>
              <label>Price:</label>
              <input #phonePrice="ngModel" type="text" name="phonePrice" ngModel required id="phonePrice"
                value="phone price">
              <ng-container *ngIf="phonePrice.touched && phonePrice.invalid" class="error">
                <p *ngIf="phonePrice.errors?.['required']" class="error">
                  Phone price is required!
                </p>
              </ng-container>

              <label>Description:</label>
              <input #description="ngModel" type="text" name="description" ngModel required minlength="10"
                id="description" value="description">
              <ng-container *ngIf="description.touched && description.invalid" class="error">
                <p *ngIf="description.errors?.['required']" class="error">
                  Phone price is required!
                </p>
              </ng-container>

              <label>Release Date:</label>
              <input #releaseDate="ngModel" type="text" name="releaseDate" ngModel required id="releaseDate"
                value="release date">
              <ng-container *ngIf="releaseDate.touched && releaseDate.invalid" class="error">
                <p *ngIf="releaseDate.errors?.['required']" class="error">
                  Phone price is required!
                </p>
              </ng-container>

              <label>Image:</label>
              <input #img="ngModel" type="text" name="img" ngModel required id="img" value="image">
            </div>

            <div class="actionBtn">
              <button [disabled]="editForm.invalid" class="save">Save</button>
              <button (click)="isInEditMode=false" [routerLink]="['/data/edit/', phone._id]"
                class="remove">Cancel</button>

            </div>







          </div>
        </div>
      </section>
    </form>
  </ng-container>
  <!-- </ng-container> -->



</div>
<ng-template #loadingIndicator>Loading...</ng-template>
